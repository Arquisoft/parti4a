<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ApacheParser.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">citizensLoader4a</a> &gt; <a href="index.source.html" class="el_package">es.uniovi.asw.parser.differentParsers</a> &gt; <span class="el_source">ApacheParser.java</span></div><h1>ApacheParser.java</h1><pre class="source lang-java linenums">package es.uniovi.asw.parser.differentParsers;

/**
 * Implementacion de paser Apache
 */
<span class="nc" id="L6">public class ApacheParser {</span>
	/*private static final Logger log = Logger.getLogger(ApacheParser.class.getName());
	private String[] args = null;
	private Options options = new Options();

	public final static String HELP_KEY = &quot;h&quot;;
	public final static String READ_EXCEL_KEY = &quot;e&quot;;
	public final static String READ_TXT_KEY = &quot;t&quot;;
	public final static String SEND_PDF_KEY = &quot;spdf&quot;;
	public final static String SEND_PLAIN_TEXT_KEY = &quot;spt&quot;;
	public final static String SEND_WORD_KEY = &quot;sword&quot;;

	private List&lt;Citizen&gt; ciudadanosLeidos = null;
	private String docummentName = &quot;&quot;;

	public ApacheParser(String[] args) {
		this.args = args;
		createOptions();
	}

	public void parse(){
		CommandLineParser parser = new BasicParser();
		CommandLine cmd = null;
		String var = args[0];
		String[] newArgs = var.split(&quot; &quot;);
		try {
			cmd = parser.parse(options, newArgs);
			if (cmd.hasOption(HELP_KEY)) {
				HelpFormatter formatter = new HelpFormatter();
				formatter.printHelp(&quot;sb server&quot;, options);
			}
			if (cmd.hasOption(READ_EXCEL_KEY)) {
				docummentName = getDocumentName(newArgs[1]);
				ciudadanosLeidos = new RListExcel().read(newArgs[1]);
			}
			if (cmd.hasOption(READ_TXT_KEY)) {
				docummentName =  getDocumentName(newArgs[1]);
				ciudadanosLeidos = new RListTXT().read(newArgs[1]);
			}
			if (cmd.hasOption(SEND_PDF_KEY)) {
				if (docummentName != &quot;&quot; &amp;&amp; ciudadanosLeidos != null) {
					for (Citizen c : ciudadanosLeidos) {
						SingletonTextWritter.getInstance().getPDFTextrWitter().createDocument(docummentName,
								MensajePersonalizado.getMessage(c));
					}
				}
			}
			if (cmd.hasOption(SEND_PLAIN_TEXT_KEY)) {
				if (docummentName != &quot;&quot; &amp;&amp; ciudadanosLeidos != null) {
					for (Citizen c : ciudadanosLeidos) {
						SingletonTextWritter.getInstance().getPlainTextWritter().createDocument(docummentName,
								MensajePersonalizado.getMessage(c));
					}
				}
			}
			if (cmd.hasOption(SEND_WORD_KEY)) {
				if (docummentName != &quot;&quot; &amp;&amp; ciudadanosLeidos != null) {
					for (Citizen c : ciudadanosLeidos) {
						SingletonTextWritter.getInstance().getWordTextWritter().createDocument(docummentName,
								MensajePersonalizado.getMessage(c));
					}
				}
			}

			else {
				log.log(Level.SEVERE, &quot;MIssing v option&quot;);
				help();
			}

		} catch (ParseException e) {
			log.log(Level.SEVERE, &quot;Failed to parse comand line properties&quot;, e);
			help();
		} catch (CitizenException ce){
			log.log(Level.WARNING, &quot;Ha ocurrido un error al cargar el fichero.&quot;, ce);
		}
		docummentName = &quot;&quot;;
		ciudadanosLeidos = null;
	}

	private void createOptions() {
//		Option excelRead = OptionBuilder.hasArgs(1).withArgName(&quot;Excel file to read&quot;).withDescription(&quot;Leer el archivo excel especificado.&quot;).create(READ_EXCEL_KEY);
//		options.addOption(excelRead);
		options.addOption(HELP_KEY, &quot;help&quot;, false, &quot;Mostrar ayuda.&quot;);
		options.addOption(READ_EXCEL_KEY, &quot;excel&quot;, true, &quot;Cargar fichero excel&quot;);
		options.addOption(READ_TXT_KEY, &quot;txt&quot;, true, &quot;Cargar fichero txt&quot;);
		options.addOption(SEND_PDF_KEY, &quot;PDF&quot;, true, &quot;Envia una carta pdf a todos los ciudadanos nuevos.&quot;);
		options.addOption(SEND_PLAIN_TEXT_KEY, &quot;Plain text&quot;, true,
				&quot;Envia una carta pen texto plano a todos los ciudadanos nuevos.&quot;);
		options.addOption(SEND_WORD_KEY, &quot;Word&quot;, true, &quot;Envia una carta en Word a todos los ciudadanos nuevos.&quot;);

	}

	private void help() {
		// This prints out some help
		HelpFormatter formater = new HelpFormatter();
		formater.printHelp(&quot;Main&quot;, options);
		//System.exit(0);
	}
	
	private String getDocumentName(String n){
		String[] fueraRuta = n.split(&quot;/&quot;);
		String myFile = fueraRuta[fueraRuta.length -1 ];
		//String[] cachos = myFile.split(&quot;.&quot;);
		String name = myFile.replaceAll(&quot;[.]+[a-z-A-Z]+&quot;, &quot;&quot;);
		return name;
	}
*/
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>