<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CitizenServiceImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">participationSystem0</a> &gt; <a href="index.source.html" class="el_package">hello.services.impl</a> &gt; <span class="el_source">CitizenServiceImpl.java</span></div><h1>CitizenServiceImpl.java</h1><pre class="source lang-java linenums">package hello.services.impl;

import hello.domain.Categoria;
import hello.domain.Citizen;
import hello.repository.CategoryRepository;
import hello.repository.CitizenRepository;
import hello.services.CitizenService;
import hello.util.exception.CitizenException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
<span class="fc" id="L15">public class CitizenServiceImpl implements CitizenService {</span>

	private CitizenRepository citizenRepository;
	private CategoryRepository categoryRepository;

	@Autowired
	public void setCitizenRepository(CitizenRepository citizenRepository) {
<span class="fc" id="L22">		this.citizenRepository = citizenRepository;</span>
<span class="fc" id="L23">	}</span>
	

	@Autowired
	public void setCategoryRepository(CategoryRepository categoryRepository) {
<span class="fc" id="L28">		this.categoryRepository = categoryRepository;</span>
<span class="fc" id="L29">	}</span>

//	@Override
//	public void createSugerencia(Sugerencia sug) throws CitizenException {
//		// boolean catBien = systemServices.existeLaCategoria(categoria);
//		// boolean nombreYcontenidoBien =
//		// (systemServices.contienePalabrasAdmitidas(contenido)
//		// || systemServices.contienePalabrasAdmitidas(nombre)) ? false : true;
//
//		try {
//			this.suggestionRepository.save(sug);
//			// Mandar a Kafka (ejemplo que no tiene por qué ser asi)
//			logger.send(Topics.CREATE_SUGGESTION,
//					sug.getNombre() + separator + sug.getContenido() + separator + sug.getCategoria());
//			loggerCutre.log(this.getClass(), &quot;Sugerencia = &quot; + sug.getNombre(), &quot;Categoria = &quot; + sug.getCategoria().getNombre());
//		} catch (Exception e) {
//			throw new CitizenException(&quot;Error al guardar lasugerencia.&quot;);
//		}
//
//	}

//	@Override
//	public void createComentario(Comentario comment) throws CitizenException {
//		// boolean sugBien = systemServices.existeLaSugerencia(sugerencia);
//		// boolean commentBien =
//		// (systemServices.contienePalabrasAdmitidas(contenido)) ? false : true;
//		// boolean todoOK = (commentBien &amp;&amp; sugBien) ? true : false;
//		try {
//
//			// addComentario(comentario);
//			this.commentRepository.save(comment);
//			logger.send(Topics.COMMENT_SUGGESTION,
//					comment.getSugerencia().getId() + separator + comment.getContenido());
//			loggerCutre.log(this.getClass(), &quot;Comentario ID = &quot; + comment.getId());
//		} catch (Exception e) {
//			throw new CitizenException(&quot;Error al crear un comentario.&quot;);
//		}
//
//	}

	@Override
	public List&lt;Categoria&gt; getCategoriasDisponibles() throws CitizenException {
		//SystemServices ss = new SystemServicesImpl();
<span class="nc" id="L72">		return categoryRepository.findAll();</span>
	}

//	@Override
//	public void createCategoria(Categoria categoria) throws CitizenException {
//		// SystemServices ss = new SystemServicesImpl();
//		this.categoryRepository.findByNombre(categoria.getNombre());
//		if (this.categoryRepository.findByNombre(categoria.getNombre()) == null)
//			this.categoryRepository.save(categoria);
//		else {
//			throw new CitizenException(&quot;Ha ocurrido un error al crear la categoría.&quot;);
//
//		}
//
//	}

	



	@Override
	public Citizen getCitizen(String email) {
<span class="nc" id="L94">		Citizen c = this.citizenRepository.findByEmail(email);</span>
<span class="nc" id="L95">		return c;</span>
	}

/*	@Override
	public void votePositiveSuggestion(Sugerencia suggestion, Citizen ciudadano) throws CitizenException {
		if(this.suggestionRepository.findOne(suggestion.getId()) == null){
			loggerCutre.log(this.getClass(), &quot;La sugerencia con nombre: &quot;+suggestion.getNombre() +&quot; no existe.&quot;);
			throw new CitizenException(&quot;La sugerencia no existe.&quot;);
		}
		suggestion.addCiudadanoHaVotado(ciudadano);
		suggestion.incrementarVotos();
		logger.send(Topics.POSITIVE_SUGGESTION_VOTE, suggestion.getId() + &quot;&quot;);
		loggerCutre.log(this.getClass(), &quot;El ciudadano con ID: &quot;+ciudadano.getId()+&quot;, Votando postivo a sugerencia ID: &quot;+suggestion.getId());

	}

	*/

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>